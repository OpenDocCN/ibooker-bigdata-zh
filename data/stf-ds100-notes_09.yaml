- en: 8  Visualization II
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8  可视化 II
- en: 原文：[https://ds100.org/course-notes/visualization_2/visualization_2.html](https://ds100.org/course-notes/visualization_2/visualization_2.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://ds100.org/course-notes/visualization_2/visualization_2.html](https://ds100.org/course-notes/visualization_2/visualization_2.html)
- en: '*Learning Outcomes* ***   Understanding KDE for plotting distributions and
    estimating density curves.'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '*学习成果* ***   了解用于绘制分布和估计密度曲线的KDE。'
- en: Using transformations to analyze the relationship between two variables.
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用转换分析两个变量之间的关系。
- en: Evaluating the quality of a visualization based on visualization theory concepts.**  **###
    8.0.1 Kernel Density Estimation
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据可视化理论概念评估可视化的质量。**  **### 8.0.1 核密度估计
- en: 8.0.1.1 KDE Theory
  id: totrans-5
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.0.1.1 KDE理论
- en: Let’s now dive into kernel density estimation. A **kernel density estimate (KDE)**
    is a smooth, continuous function that approximates a curve. They allow us to represent
    general trends in a distribution without focusing on the details, which is useful
    for analyzing the broad structure of a dataset.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们深入研究核密度估计。**核密度估计（KDE）**是一种平滑的连续函数，它近似表示一条曲线。它们允许我们表示分布的一般趋势，而不专注于细节，这对于分析数据集的广泛结构是有用的。
- en: More formally, a KDE attempts to approximate the underlying **probability distribution**
    from which our dataset was drawn. You may have encountered the idea of a probability
    distribution in your other classes; if not, we’ll discuss it at length in the
    next lecture. For now, you can think of a probability distribution as a description
    of how likely it is for us to sample a particular value in our dataset.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 更正式地说，KDE试图近似我们的数据集抽取的潜在**概率分布**。您可能在其他课程中遇到过概率分布的概念；如果没有，我们将在下一讲中详细讨论。现在，您可以将概率分布视为描述我们在数据集中抽取特定值的可能性有多大。
- en: A KDE curve estimates the probability density function of a random variable.
    Consider the example below, where we have used `sns.displot` to plot both a histogram
    (containing the data points we actually collected) and a KDE curve (representing
    the *approximated* probability distribution from which this data was drawn) using
    data from the World Bank dataset (`wb`) we’ve worked with before.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: KDE曲线估计随机变量的概率密度函数。考虑下面的例子，我们使用`sns.displot`绘制了直方图（包含我们实际收集的数据点）和KDE曲线（代表*近似*概率分布，从中抽取了这些数据）使用我们之前使用过的世界银行数据集（`wb`）。
- en: <details><summary>Code</summary>
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: <details><summary>代码</summary>
- en: '[PRE0]</details>'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE0]</details>'
- en: '|  | Continent | Country | Primary completion rate: Male: % of relevant age
    group: 2015 | Primary completion rate: Female: % of relevant age group: 2015 |
    Lower secondary completion rate: Male: % of relevant age group: 2015 | Lower secondary
    completion rate: Female: % of relevant age group: 2015 | Youth literacy rate:
    Male: % of ages 15-24: 2005-14 | Youth literacy rate: Female: % of ages 15-24:
    2005-14 | Adult literacy rate: Male: % ages 15 and older: 2005-14 | Adult literacy
    rate: Female: % ages 15 and older: 2005-14 | ... | Access to improved sanitation
    facilities: % of population: 1990 | Access to improved sanitation facilities:
    % of population: 2015 | Child immunization rate: Measles: % of children ages 12-23
    months: 2015 | Child immunization rate: DTP3: % of children ages 12-23 months:
    2015 | Children with acute respiratory infection taken to health provider: % of
    children under age 5 with ARI: 2009-2016 | Children with diarrhea who received
    oral rehydration and continuous feeding: % of children under age 5 with diarrhea:
    2009-2016 | Children sleeping under treated bed nets: % of children under age
    5: 2009-2016 | Children with fever receiving antimalarial drugs: % of children
    under age 5 with fever: 2009-2016 | Tuberculosis: Treatment success rate: % of
    new cases: 2014 | Tuberculosis: Cases detection rate: % of new estimated cases:
    2015 |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
  zh: '|  | 大陆 | 国家 | 男性初级完成率：相关年龄组的百分比：2015 | 女性初级完成率：相关年龄组的百分比：2015 | 男性初中完成率：相关年龄组的百分比：2015
    | 女性初中完成率：相关年龄组的百分比：2015 | 青年识字率：男性：15-24岁的百分比：2005-14 | 青年识字率：女性：15-24岁的百分比：2005-14
    | 成年识字率：男性：15岁及以上的百分比：2005-14 | 成年识字率：女性：15岁及以上的百分比：2005-14 | ... | 改善卫生设施的使用率：人口的百分比：1990
    | 改善卫生设施的使用率：人口的百分比：2015 | 儿童接种率：麻疹：12-23个月的儿童的百分比：2015 | 儿童接种率：DTP3：12-23个月的儿童的百分比：2015
    | 患急性呼吸道感染的儿童就医比例：5岁以下患急性呼吸道感染的儿童的百分比：2009-2016 | 患腹泻的儿童接受口服补液和持续喂养的比例：5岁以下患腹泻的儿童的百分比：2009-2016
    | 睡在经过处理的蚊帐下的儿童比例：5岁以下儿童的百分比：2009-2016 | 发烧的儿童接受抗疟疾药物的比例：5岁以下发烧的儿童的百分比：2009-2016
    | 结核病：治疗成功率：新病例的百分比：2014 | 结核病：病例检测率：新估计病例的百分比：2015 |'
- en: '| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | ---
    | --- | --- | --- | --- | --- | --- | --- | --- | --- |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | ---
    | --- | --- | --- | --- | --- | --- | --- | --- | --- |'
- en: '| 0 | Africa | Algeria | 106.0 | 105.0 | 68.0 | 85.0 | 96.0 | 92.0 | 83.0 |
    68.0 | ... | 80.0 | 88.0 | 95.0 | 95.0 | 66.0 | 42.0 | NaN | NaN | 88.0 | 80.0
    |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '| 0 | 非洲 | 阿尔及利亚 | 106.0 | 105.0 | 68.0 | 85.0 | 96.0 | 92.0 | 83.0 | 68.0
    | ... | 80.0 | 88.0 | 95.0 | 95.0 | 66.0 | 42.0 | NaN | NaN | 88.0 | 80.0 |'
- en: '| 1 | Africa | Angola | NaN | NaN | NaN | NaN | 79.0 | 67.0 | 82.0 | 60.0 |
    ... | 22.0 | 52.0 | 55.0 | 64.0 | NaN | NaN | 25.9 | 28.3 | 34.0 | 64.0 |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 非洲 | 安哥拉 | NaN | NaN | NaN | NaN | 79.0 | 67.0 | 82.0 | 60.0 | ... |
    22.0 | 52.0 | 55.0 | 64.0 | NaN | NaN | 25.9 | 28.3 | 34.0 | 64.0 |'
- en: '| 2 | Africa | Benin | 83.0 | 73.0 | 50.0 | 37.0 | 55.0 | 31.0 | 41.0 | 18.0
    | ... | 7.0 | 20.0 | 75.0 | 79.0 | 23.0 | 33.0 | 72.7 | 25.9 | 89.0 | 61.0 |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 非洲 | 贝宁 | 83.0 | 73.0 | 50.0 | 37.0 | 55.0 | 31.0 | 41.0 | 18.0 | ...
    | 7.0 | 20.0 | 75.0 | 79.0 | 23.0 | 33.0 | 72.7 | 25.9 | 89.0 | 61.0 |'
- en: '| 3 | Africa | Botswana | 98.0 | 101.0 | 86.0 | 87.0 | 96.0 | 99.0 | 87.0 |
    89.0 | ... | 39.0 | 63.0 | 97.0 | 95.0 | NaN | NaN | NaN | NaN | 77.0 | 62.0 |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 非洲 | 博茨瓦纳 | 98.0 | 101.0 | 86.0 | 87.0 | 96.0 | 99.0 | 87.0 | 89.0 |
    ... | 39.0 | 63.0 | 97.0 | 95.0 | NaN | NaN | NaN | NaN | 77.0 | 62.0 |'
- en: '| 5 | Africa | Burundi | 58.0 | 66.0 | 35.0 | 30.0 | 90.0 | 88.0 | 89.0 | 85.0
    | ... | 42.0 | 48.0 | 93.0 | 94.0 | 55.0 | 43.0 | 53.8 | 25.4 | 91.0 | 51.0 |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| 5 | 非洲 | 布隆迪 | 58.0 | 66.0 | 35.0 | 30.0 | 90.0 | 88.0 | 89.0 | 85.0 | ...
    | 42.0 | 48.0 | 93.0 | 94.0 | 55.0 | 43.0 | 53.8 | 25.4 | 91.0 | 51.0 |'
- en: 5 rows × 47 columns
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 5行×47列
- en: '[PRE1]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[PRE2]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/a31f128c0cc35feadfec673d890e42d1.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a31f128c0cc35feadfec673d890e42d1.png)'
- en: Notice that the smooth KDE curve is higher when the histogram bins are taller.
    You can think of the height of the KDE curve as representing how “probable” it
    is that we randomly sample a datapoint with the corresponding value. This intuitively
    makes sense – if we have already collected more datapoints with a particular value
    (resulting in a tall histogram bin), it is more likely that, if we randomly sample
    another datapoint, we will sample one with a similar value (resulting in a high
    KDE curve).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，平滑的KDE曲线在直方图箱更高时更高。你可以将KDE曲线的高度看作代表我们随机抽样具有相应值的数据点的“可能性”有多大。这在直观上是有意义的 -
    如果我们已经收集了更多具有特定值的数据点（导致一个高的直方图箱），那么如果我们随机抽样另一个数据点，我们更有可能抽样到一个具有类似值的数据点（导致高的KDE曲线）。
- en: The area under a probability density function should always integrate to 1,
    representing the fact that the total probability of a distribution should always
    sum to 100%. Because of this, a KDE curve will always have an area of 1 under
    the curve.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 概率密度函数下的面积应该始终积分为1，表示分布的总概率应始终总和为100%。因此，KDE曲线下始终有一个面积为1。
- en: 8.0.1.2 Constructing a KDE
  id: totrans-24
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.0.1.2 构建KDE
- en: We perform kernel density estimation using three steps.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用三个步骤进行核密度估计。
- en: Place a kernel at each datapoint.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在每个数据点放置一个核。
- en: Normalize the kernels to have a total area of 1 (across all kernels).
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将核函数归一化，使其总面积为1（跨所有核函数）。
- en: Sum the normalized kernels.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对归一化的核求和。
- en: We’ll explain what a “kernel” is momentarily.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 我们马上会解释“核”是什么。
- en: 'To make things simpler, let’s construct a KDE for a small, artificially generated
    dataset of 5 datapoints: \([2.2, 2.8, 3.7, 5.3, 5.7]\). In the plot below, each
    vertical bar represents one data point.'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 为了简化，让我们为一个由5个数据点构成的小型人工生成的数据集\([2.2, 2.8, 3.7, 5.3, 5.7]\)构建一个KDE。在下面的图中，每个垂直条代表一个数据点。
- en: <details><summary>Code</summary>
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: <details><summary>代码</summary>
- en: '[PRE3]</details>'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE3]</details>'
- en: '![](../Images/59e190837436e36e77d086762ae6972c.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/59e190837436e36e77d086762ae6972c.png)'
- en: Our goal is to create the following KDE curve, which was generated automatically
    by `sns.kdeplot`.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的目标是创建以下由`sns.kdeplot`自动生成的KDE曲线。
- en: <details><summary>Code</summary>
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: <details><summary>代码</summary>
- en: '[PRE4]</details>'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE4]</details>'
- en: '![](../Images/177c339c49685d805c47265631003fba.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/177c339c49685d805c47265631003fba.png)'
- en: '8.0.1.2.1 Step 1: Place a Kernel at Each Data Point'
  id: totrans-38
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 8.0.1.2.1 步骤1：在每个数据点上放置一个核
- en: To begin generating a density curve, we need to choose a **kernel** and **bandwidth
    value (\(\alpha\))**. What are these exactly?
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始生成密度曲线，我们需要选择一个**核**和**带宽值（\(\alpha\))**。这些究竟是什么？
- en: 'A **kernel** is a density curve. It is the mathematical function that attempts
    to capture the randomness of each data point in our sampled data. To explain what
    this means, consider just *one* of the datapoints in our dataset: \(2.2\). We
    obtained this datapoint by randomly sampling some information out in the real
    world (you can imagine \(2.2\) as representing a single measurement taken in an
    experiment, for example). If we were to sample a new datapoint, we may obtain
    a slightly different value. It could be higher than \(2.2\); it could also be
    lower than \(2.2\). We make the assumption that any future sampled datapoints
    will likely be similar in value to the data we’ve already drawn. This means that
    our *kernel* – our description of the probability of randomly sampling any new
    value – will be greatest at the datapoint we’ve already drawn but still have non-zero
    probability above and below it. The area under any kernel should integrate to
    1, representing the total probability of drawing a new datapoint.'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '**核**是一个密度曲线。它是试图捕捉我们采样数据中每个数据点的随机性的数学函数。为了解释这意味着什么，考虑我们数据集中的*一个*数据点：\(2.2\)。我们通过随机抽样得到了这个数据点（你可以想象\(2.2\)代表实验中进行的单次测量，例如）。如果我们抽样一个新的数据点，可能会得到一个略有不同的值。它可能高于\(2.2\)；也可能低于\(2.2\)。我们假设任何未来抽样的数据点可能与我们已经绘制的数据值相似。这意味着我们的*核*
    - 我们对随机抽样任何新值的概率的描述 - 在我们已经绘制的数据点处最大，但在其上下仍具有非零概率。任何核下的面积应该积分为1，表示抽取新数据点的总概率。'
- en: A **bandwidth value**, usually denoted by \(\alpha\), represents the width of
    the kernel. A large value of \(\alpha\) will result in a wide, short kernel function,
    while a small value with result in a narrow, tall kernel.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '**带宽值**通常用 \(\alpha\) 表示，表示核的宽度。 \(\alpha\) 的值越大，核函数就会变得宽而短，而值越小，核函数就会变得窄而高。'
- en: Below, we place a **Gaussian kernel**, plotted in orange, over the datapoint
    \(2.2\). A Gaussian kernel is simply the normal distribution, which you may have
    called a bell curve in Data 8.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 下面，我们在数据点\(2.2\)上放置了一个**高斯核**，用橙色绘制。高斯核简单地是正态分布，在Data 8中可能称为钟形曲线。
- en: <details><summary>Code</summary>
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: <details><summary>代码</summary>
- en: '[PRE5]</details>'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE5]</details>'
- en: '![](../Images/eceda4c2fcc3cd7740fd6bb4eccb57b0.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/eceda4c2fcc3cd7740fd6bb4eccb57b0.png)'
- en: To begin creating our KDE, we place a kernel on *each* datapoint in our dataset.
    For our dataset of 5 points, we will have 5 kernels.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始创建我们的KDE，我们在我们的数据集中的*每个*数据点上放置一个核。对于我们的5个数据点的数据集，我们将有5个核。
- en: <details><summary>Code</summary>
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: <details><summary>代码</summary>
- en: '[PRE6]</details>'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE6]</details>'
- en: '![](../Images/1d32972c4a33bf42703654b9ea6812ad.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1d32972c4a33bf42703654b9ea6812ad.png)'
- en: '8.0.1.2.2 Step 2: Normalize Kernels to Have a Total Area of 1'
  id: totrans-50
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 8.0.1.2.2 步骤2：将核归一化为总面积为1
- en: Above, we said that *each* kernel has an area of 1\. Earlier, we also said that
    our goal is to construct a KDE curve using these kernels with a *total* area of
    1\. If we were to directly sum the kernels as they are, we would produce a KDE
    curve with an integrated area of (5 kernels) \(\times\) (area of 1 each) = 5\.
    To avoid this, we will **normalize** each of our kernels. This involves multiplying
    each kernel by \(1/(\#\:\text{datapoints})\).
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 前面我们说*每个*核的面积为1。早些时候，我们还说我们的目标是使用这些核构建一个*总*面积为1的KDE曲线。如果我们直接将核求和，我们将得到一个积分面积为（5个核）\(\times\)（每个1的面积）=
    5。为了避免这种情况，我们将**归一化**我们的每个核。这涉及将每个核乘以\(1/(\#\:\text{数据点})\)。
- en: In the cell below, we multiply each of our 5 kernels by \(\frac{1}{5}\) to apply
    normalization.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的单元格中，我们将我们的5个核心中的每一个乘以\(\frac{1}{5}\)来应用归一化。
- en: <details><summary>Code</summary>
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: <details><summary>代码</summary>
- en: '[PRE7]</details>'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE7]</details>'
- en: '![](../Images/02edd5c06de6a44dde62d61eef6699cc.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/02edd5c06de6a44dde62d61eef6699cc.png)'
- en: '8.0.1.2.3 Step 3: Sum the Normalized Kernels'
  id: totrans-56
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 8.0.1.2.3 步骤3：求和归一化核心
- en: Our KDE curve is the sum of the normalized kernels. Notice that the final curve
    is identical to the plot generated by `sns.kdeplot` we saw earlier!
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的KDE曲线是归一化核心的总和。请注意，最终曲线与我们之前看到的`sns.kdeplot`生成的图相同！
- en: <details><summary>Code</summary>
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: <details><summary>代码</summary>
- en: '[PRE8]</details>'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE8]</details>'
- en: '![](../Images/b90c138aef98a36cab1da30c31bf3393.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b90c138aef98a36cab1da30c31bf3393.png)'
- en: 8.0.1.3 Kernel Functions and Bandwidths
  id: totrans-61
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.0.1.3 核函数和带宽
- en: 'A **kernel** (for our purposes) is a valid density function. This means it:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 一个**核心**（对我们来说）是一个有效的密度函数。这意味着它：
- en: Must be non-negative for all inputs.
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于所有输入，必须为非负。
- en: Must integrate to 1.
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 必须积分为1。
- en: '![kde_function](../Images/c94569ad53b6922487f2e664817d0385.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![kde_function](../Images/c94569ad53b6922487f2e664817d0385.png)'
- en: A general “KDE formula” function is given above.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 上面给出了一个一般的“KDE公式”函数。
- en: \(K_{\alpha}(x, x_i)\) is the kernel centered on the observation `i`.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: \(K_{\alpha}(x, x_i)\)是以观察`i`为中心的核心。
- en: Each kernel individually has area 1.
  id: totrans-68
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个核心单独的面积为1。
- en: x represents any number on the number line. It is the input to our function.
  id: totrans-69
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: x代表数轴上的任何数字。它是我们函数的输入。
- en: \(n\) is the number of observed datapoints that we have.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: \(n\)是我们观察到的数据点的数量。
- en: We multiply by \(\frac{1}{n}\) so that the total area of the KDE is still 1.
  id: totrans-71
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们乘以\(\frac{1}{n}\)，以便KDE的总面积仍然为1。
- en: Each \(x_i \in \{x_1, x_2, \dots, x_n\}\) represents an observed datapoint.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 每个\(x_i \in \{x_1, x_2, \dots, x_n\}\)代表一个观察到的数据点。
- en: These are what we use to create our KDE by summing multiple shifted kernels
    centered at these points.
  id: totrans-73
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这些是我们用来通过对这些点进行多次移位的核心来创建我们的KDE的。
- en: '*\(\alpha\) (alpha) is the bandwidth or smoothing parameter.'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '*\(\alpha\)（alpha）是带宽或平滑参数。'
- en: 8.0.1.3.1 Gaussian Kernel
  id: totrans-75
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 8.0.1.3.1 高斯核
- en: The most common kernel is the **Gaussian kernel**. The Gaussian kernel is equivalent
    to the Gaussian probability density function (the Normal distribution), centered
    at the observed value with a standard deviation of (this is known as the **bandwidth**
    parameter).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 最常见的核心是**高斯核**。高斯核等同于以观察值为中心，标准差为（这被称为**带宽**参数）的高斯概率密度函数。
- en: \[K_a(x, x_i) = \frac{1}{\sqrt{2\pi\alpha^{2}}}e^{-\frac{(x-x_i)^{2}}{2\alpha^{2}}}\]
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: \[K_a(x, x_i) = \frac{1}{\sqrt{2\pi\alpha^{2}}}e^{-\frac{(x-x_i)^{2}}{2\alpha^{2}}}\]
- en: 'In this formula:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个公式中：
- en: \(x\) (no subscript) represents values along the x-axis of our plot
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: \(x\)（无下标）代表我们绘图的x轴上的值
- en: \(x_i\) represents the \(i\)th datapoint in our dataset. It is one of the values
    that we have actually collected in our data sampling process. In our example earlier,
    \(x_i=2.2\). Those of you who have taken a probability class may recognize \(x_i\)
    as the **mean** of the normal distribution.
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: \(x_i\)代表我们数据集中的第\(i\)个数据点。这是我们在数据采样过程中实际收集到的值之一。在我们之前的例子中，\(x_i=2.2\)。那些上过概率课的人可能会认出\(x_i\)是正态分布的**均值**。
- en: \(\alpha\) is the bandwidth parameter, representing the width of our kernel.
    More formally, \(\alpha\) is the **standard deviation** of the Gaussian curve.
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: \(\alpha\)是带宽参数，代表我们核心的宽度。更正式地说，\(\alpha\)是高斯曲线的**标准差**。
- en: The details of this (admittedly intimidating) formula are less important than
    understanding its role in kernel density estimation – this equation gives us the
    shape of each kernel.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 这个（令人生畏的）公式的细节不如理解它在核密度估计中的作用重要-这个方程给了我们每个核心的形状。
- en: A large value of \(\alpha\) will produce a kernel that is wider and shorter
    – this leads to a smoother KDE when the kernels are summed together. Conversely,
    a small value of \(\alpha\) will produce a narrower, taller kernel, and, with
    it, a noisier KDE.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 较大的\(\alpha\)值会产生一个更宽更短的核心-当这些核心被求和时，这会导致更平滑的KDE。相反，较小的\(\alpha\)值会产生一个更窄更高的核心，以及一个更嘈杂的KDE。
- en: '**Gaussian Kernel, \(\alpha\) = 0.1**'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '**高斯核，\(\alpha\) = 0.1**'
- en: '![gaussian_0.1](../Images/ca1a4a6f8659ed6c4772adf33afa0d5c.png)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![高斯_0.1](../Images/ca1a4a6f8659ed6c4772adf33afa0d5c.png)'
- en: '**Gaussian Kernel, \(\alpha\) = 1**'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '**高斯核，\(\alpha\) = 1**'
- en: '![gaussian_1](../Images/7c70a4e2cfdaed5941ad57a8ab4ee091.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![高斯_1](../Images/7c70a4e2cfdaed5941ad57a8ab4ee091.png)'
- en: '**Gaussian Kernel, \(\alpha\) = 2**'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '**高斯核，\(\alpha\) = 2**'
- en: '![gaussian_2](../Images/eb498ea36280dda15d259243c9b4d767.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![高斯_2](../Images/eb498ea36280dda15d259243c9b4d767.png)'
- en: '**Gaussian Kernel, \(\alpha\) = 10**'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '**高斯核，\(\alpha\) = 10**'
- en: '![gaussian_10](../Images/b298cc55cf330a3e287aa3362ce4ba10.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![高斯_10](../Images/b298cc55cf330a3e287aa3362ce4ba10.png)'
- en: 8.0.1.4 Boxcar Kernel
  id: totrans-92
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.0.1.4 矩箱核
- en: Another example of a kernel is the **Boxcar kernel**. The boxcar kernel assigns
    a uniform density to points within a “window” of the observation, and a density
    of 0 elsewhere. The equation below is a boxcar kernel with the center at \(x_i\)
    and the bandwidth of \(\alpha\).
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 核心的另一个例子是**矩箱核**。矩箱核为观察点内的点分配均匀密度，其他地方的密度为0。下面的方程是以\(x_i\)为中心，带宽为\(\alpha\)的矩箱核。
- en: \[K_a(x, x_i) = \begin{cases} \frac{1}{\alpha}, & |x - x_i| \le \frac{\alpha}{2}\\
    0, & \text{else } \end{cases}\]
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: \[K_a(x, x_i) = \begin{cases} \frac{1}{\alpha}, & |x - x_i| \le \frac{\alpha}{2}\\
    0, & \text{else } \end{cases}\]
- en: The boxcar kernel is seldom used in practice – we include it here to demonstrate
    that a kernel function can take whatever form you would like, provided it integrates
    to 1 and does not output negative values.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 矩箱核在实践中很少使用-我们在这里包括它是为了演示核函数可以采用任何您喜欢的形式，只要它积分为1并且不输出负值。
- en: <details><summary>Code</summary>
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: <details><summary>代码</summary>
- en: '[PRE9]</details>'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE9]</details>'
- en: '![](../Images/c31a14ce5a0dd83fff402b6b68659dec.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c31a14ce5a0dd83fff402b6b68659dec.png)'
- en: The Boxcar kernel centered at 0 with bandwidth \(\alpha\) = 1.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 以带宽\(\alpha\) = 1为中心的矩箱核。
- en: The diagram on the right is how the density curve for our 5 point dataset would
    have looked had we used the Boxcar kernel with bandwidth \(\alpha\) = 1.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 右侧的图表显示了我们的5个数据点数据集使用Boxcar核和带宽\(\alpha\) = 1时的密度曲线。
- en: '![kde_step_3](../Images/e9f6a282200c155196e89e71ab16cb38.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![kde_step_3](../Images/e9f6a282200c155196e89e71ab16cb38.png)'
- en: '![boxcar_kernel](../Images/8e5d28752a58033d6e9e22c724b208c4.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![boxcar_kernel](../Images/8e5d28752a58033d6e9e22c724b208c4.png)'
- en: 8.0.1.5 Diving Deeper into `displot`
  id: totrans-103
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.0.1.5 深入了解`displot`
- en: As we saw earlier, we can use `seaborn`’s `displot` function to plot various
    distributions. In particular, `displot` allows you to specify the `kind` of plot
    and is a wrapper for `histplot`, `kdeplot`, and `ecdfplot`.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们之前看到的，我们可以使用`seaborn`的`displot`函数来绘制各种分布。特别是，`displot`允许您指定绘图的`kind`，并且是`histplot`、`kdeplot`和`ecdfplot`的包装器。
- en: Below, we can see a couple of examples of how `sns.displot` can be used to plot
    various distributions.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 下面，我们可以看到一些示例，说明了如何使用`sns.displot`来绘制各种分布。
- en: First, we can plot a histogram by setting `kind` to `"hist"`. Note that here
    we’ve specified `stat = density` to normalize the histogram such that the area
    under the histogram is equal to 1.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们可以通过将`kind`设置为`"hist"`来绘制直方图。请注意，这里我们指定了`stat = density`，以使直方图归一化，使得直方图下面积等于1。
- en: '[PRE10]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![](../Images/6051a738b3f47e675bf952a1610e4f1e.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6051a738b3f47e675bf952a1610e4f1e.png)'
- en: Now, what if we want to generate a KDE plot? We can set `kind` = to `"kde"`!
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果我们想生成一个KDE图呢？我们可以将`kind`设置为`"kde"`！
- en: '[PRE12]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '![](../Images/d213847c69565866bbd30798ca736b5f.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d213847c69565866bbd30798ca736b5f.png)'
- en: And finally, if we want to generate an Empirical Cumulative Distribution Function
    (ECDF), we can specify `kind = "ecdf"`.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，如果我们想生成一个经验累积分布函数（ECDF），我们可以指定`kind = "ecdf"`。
- en: '[PRE14]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '![](../Images/7e1d5c101dfe1c66c00882236f90e1ab.png)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7e1d5c101dfe1c66c00882236f90e1ab.png)'
- en: 8.1 Relationships Between Quantitative Variables
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.1 定量变量之间的关系
- en: Up until now, we’ve discussed how to visualize single-variable distributions.
    Going beyond this, we want to understand the relationship between pairs of numerical
    variables.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经讨论了如何可视化单变量分布。除此之外，我们还想了解数值变量对之间的关系。
- en: 8.1.0.1 Scatter Plots
  id: totrans-120
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.1.0.1 散点图
- en: '**Scatter plots** are one of the most useful tools in representing the relationship
    between two quantitative variables. They are particularly important in gauging
    the strength, or correlation, of the relationship between variables. Knowledge
    of these relationships can then motivate decisions in our modeling process.'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '**散点图**是表示两个定量变量之间关系的最有用的工具之一。它们在评估变量之间的关系强度或相关性方面特别重要。对这些关系的了解可以激发我们建模过程中的决策。'
- en: In `matplotlib`, we use the function `plt.scatter` to generate a scatter plot.
    Notice that, unlike our examples of plotting single-variable distributions, now
    we specify sequences of values to be plotted along the x-axis *and* the y-axis.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 在`matplotlib`中，我们使用函数`plt.scatter`来生成散点图。请注意，与我们绘制单变量分布的示例不同，现在我们指定要沿x轴和y轴绘制的值序列。
- en: '[PRE16]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '![](../Images/226e0d0d29f96f31b6187e9142d0c83a.png)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/226e0d0d29f96f31b6187e9142d0c83a.png)'
- en: In `seaborn`, we call the function `sns.scatterplot`. We use the `x` and `y`
    parameters to indicate the values to be plotted along the x and y axes, respectively.
    By using the `hue` parameter, we can specify a third variable to be used for coloring
    each scatter point.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在`seaborn`中，我们调用函数`sns.scatterplot`。我们使用`x`和`y`参数来指示要沿x轴和y轴绘制的值。通过使用`hue`参数，我们可以指定用于给每个散点着色的第三个变量。
- en: '[PRE17]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '![](../Images/4728141b91b2a6b6945537066f70c482.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4728141b91b2a6b6945537066f70c482.png)'
- en: Although the plots above communicate the general relationship between the two
    plotted variables, they both suffer a major limitation – **overplotting**. Overplotting
    occurs when scatter points with similar values are stacked on top of one another,
    making it difficult to see the number of scatter points actually plotted in the
    visualization. Notice how in the upper righthand region of the plots, we cannot
    easily tell just how many points have been plotted. This makes our visualizations
    difficult to interpret.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管上面的图表传达了两个变量之间的一般关系，但它们都存在一个主要限制——**过度绘制**。当具有相似值的散点堆叠在一起时，就会发生过度绘制，这使得很难看出实际绘制的散点数量。请注意，在图表的右上方区域，我们无法轻易地判断出有多少点已经被绘制。这使得我们的可视化难以解释。
- en: 'We have a few methods to help reduce overplotting:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有一些方法可以帮助减少过度绘制：
- en: Decreasing the size of the scatter point markers can improve readability. We
    do this by setting a new value to the size parameter, `s`, of `plt.scatter` or
    `sns.scatterplot`.
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 减小散点标记的大小可以提高可读性。我们可以通过将`plt.scatter`或`sns.scatterplot`的大小参数`s`设置为新值来实现这一点。
- en: '**Jittering** is the process of adding a small amount of random noise to all
    x and y values to slightly shift the position of each datapoint. By randomly shifting
    all the data by some small distance, we can discern individual points more clearly
    without modifying the major trends of the original dataset.'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**抖动**是向所有x和y值添加少量随机噪声的过程，以略微移动每个数据点的位置。通过随机移动所有数据一小段距离，我们可以更清楚地区分各个点，而不会改变原始数据集的主要趋势。'
- en: In the cell below, we first jitter the data using `np.random.uniform`, then
    re-plot it with smaller markers. The resulting plot is much easier to interpret.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的单元格中，我们首先使用`np.random.uniform`对数据进行抖动，然后使用较小的标记重新绘制。结果图更容易解释。
- en: '[PRE18]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '![](../Images/b5f0f807c9d1a90768dc9ac943a4daed.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b5f0f807c9d1a90768dc9ac943a4daed.png)'
- en: 8.1.0.2 `lmplot` and `jointplot`
  id: totrans-135
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.1.0.2 `lmplot`和`jointplot`
- en: '`seaborn` also includes several built-in functions for creating more sophisticated
    scatter plots. Two of the most commonly used examples are `sns.lmplot` and `sns.jointplot`.'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '`seaborn`还包括几个内置函数，用于创建更复杂的散点图。其中最常用的两个例子是`sns.lmplot`和`sns.jointplot`。'
- en: '`sns.lmplot` plots both a scatter plot *and* a linear regression line, all
    in one function call. We’ll discuss linear regression in a few lectures.'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '`sns.lmplot`在一个函数调用中绘制了散点图和线性回归线。我们将在几节课中讨论线性回归。'
- en: '[PRE19]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[PRE20]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '![](../Images/8636ba41782fc862eb2d7d89ed14a746.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8636ba41782fc862eb2d7d89ed14a746.png)'
- en: '`sns.jointplot` creates a visualization with three components: a scatter plot,
    a histogram of the distribution of x values, and a histogram of the distribution
    of y values.'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '`sns.jointplot` 创建了一个可视化，包括三个组件：散点图、x值分布的直方图和y值分布的直方图。'
- en: '[PRE21]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '![](../Images/559cf8e6e5417ba8d8173b80096d8420.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/559cf8e6e5417ba8d8173b80096d8420.png)'
- en: 8.1.0.3 Hex plots
  id: totrans-144
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.1.0.3 六边形图
- en: For datasets with a very large number of datapoints, jittering is unlikely to
    fully resolve the issue of overplotting. In these cases, we can attempt to visualize
    our data by its *density*, rather than displaying each individual datapoint.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 对于具有大量数据点的数据集，抖动不太可能完全解决重叠绘图的问题。在这种情况下，我们可以尝试通过*密度*来可视化我们的数据，而不是显示每个单独的数据点。
- en: '**Hex plots** can be thought of as two-dimensional histograms that show the
    joint distribution between two variables. This is particularly useful when working
    with very dense data. In a hex plot, the x-y plane is binned into hexagons. Hexagons
    that are darker in color indicate a greater density of data – that is, there are
    more data points that lie in the region enclosed by the hexagon.'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '**六边形图**可以被看作是显示两个变量之间联合分布的二维直方图。在处理非常密集的数据时，这是特别有用的。在六边形图中，x-y平面被分成六边形。颜色较深的六边形表示数据的密度更大
    - 也就是说，在六边形所围区域内有更多的数据点。'
- en: We can generate a hex plot using `sns.jointplot` modified with the `kind` parameter.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用带有`kind`参数修改的`sns.jointplot`生成六边形图。
- en: '[PRE22]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '![](../Images/3a994c3a7631860662fbbf0f4c6df9d9.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3a994c3a7631860662fbbf0f4c6df9d9.png)'
- en: 8.1.0.4 Contour Plots
  id: totrans-150
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.1.0.4 等高线图
- en: '**Contour plots** are an alternative way of plotting the joint distribution
    of two variables. You can think of them as the 2-dimensional versions of KDE plots.
    A contour plot can be interpreted in a similar way to a [topographic map](https://gisgeography.com/contour-lines-topographic-map/).
    Each contour line represents an area that has the same *density* of datapoints
    throughout the region. Contours marked with darker colors contain more datapoints
    (a higher density) in that region.'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '**等高线图**是绘制两个变量的联合分布的另一种方式。你可以把它们看作是KDE图的二维版本。等高线图可以类似于[等高线地图](https://gisgeography.com/contour-lines-topographic-map/)。每条等高线代表一个具有相同*数据密度*的区域。深色标记的等高线包含更多的数据点（更高的密度）。'
- en: '`sns.kdeplot` will generate a contour plot if we specify both x and y data.'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们指定了x和y数据，`sns.kdeplot`将生成等高线图。
- en: '[PRE23]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '![](../Images/edaf6da41dd657ef0dcc400d0a58102e.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/edaf6da41dd657ef0dcc400d0a58102e.png)'
- en: 8.2 Transformations
  id: totrans-155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.2 转换
- en: We have now covered visualizations in great depth, looking into various forms
    of visualizations, plotting libraries, and high-level theory.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经深入研究了可视化，涉及各种形式的可视化、绘图库和高层理论。
- en: Much of this was done to uncover insights in data, which will prove necessary
    when we begin building models of data later in the course. A strong graphical
    correlation between two variables hints at an underlying relationship that we
    may want to study in greater detail. However, relying on visual relationships
    alone is limiting - not all plots show association. The presence of outliers and
    other statistical anomalies makes it hard to interpret data.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 这些工作的大部分是为了发现数据中的见解，在课程后期构建数据模型时将证明是必要的。两个变量之间的强烈图形相关性暗示着一个我们可能想要更详细研究的潜在关系。然而，仅依赖于视觉关系是有限的
    - 并非所有的图表都显示出关联。异常值和其他统计异常使得难以解释数据。
- en: '**Transformations** are the process of manipulating data to find significant
    relationships between variables. These are often found by applying mathematical
    functions to variables that “transform” their range of possible values and highlight
    some previously hidden associations between data.'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '**转换**是操纵数据以找到变量之间显著关系的过程。通常通过将数学函数应用于“转换”它们的可能值范围，并突出一些以前隐藏的数据关联来找到这些关系。'
- en: To see why we may want to transform data, consider the following plot of adult
    literacy rates against gross national income.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解为什么我们可能需要转换数据，请考虑以下成年人识字率与国民总收入的图表。
- en: <details><summary>Code</summary>
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: <details><summary>代码</summary>
- en: '[PRE24]</details>'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE24]</details>'
- en: '![](../Images/637aa036a267d8c5d745347620ed2376.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/637aa036a267d8c5d745347620ed2376.png)'
- en: 'This plot is difficult to interpret for two reasons:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 这个图很难解释，原因有两个：
- en: The data shown in the visualization appears almost “smushed” – it is heavily
    concentrated in the upper lefthand region of the plot. Even if we jittered the
    dataset, we likely would not be able to fully assess all datapoints in that area.
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可视化中显示的数据似乎几乎“挤压”在一起 - 它在图表的左上方区域非常集中。即使我们对数据集进行了抖动，我们可能也无法完全评估该区域内的所有数据点。
- en: It is hard to generalize a clear relationship between the two plotted variables.
    While adult literacy rate appears to share some positive relationship with gross
    national income, we are not able to describe the specifics of this trend in much
    detail.
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 很难概括出两个变量之间的明确关系。虽然成年人识字率似乎与国民总收入有一些正向关系，但我们无法详细描述这一趋势的具体情况。
- en: A transformation would allow us to visualize this data more clearly, which,
    in turn, would enable us to describe the underlying relationship between our variables
    of interest.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 转换将使我们能够更清晰地可视化这些数据，从而使我们能够描述我们感兴趣的变量之间的潜在关系。
- en: We will most commonly apply a transformation to **linearize a relationship**
    between variables. If we find a transformation to make a scatter plot of two variables
    linear, we can “backtrack” to find the exact relationship between the variables.
    This helps us in two major ways. Firstly, linear relationships are particularly
    simple to interpret – we have an intuitive sense of what the slope and intercept
    of a linear trend represent, and how they can help us understand the relationship
    between two variables. Secondly, linear relationships are the backbone of linear
    models. We will begin exploring linear modeling in great detail next week. As
    we’ll soon see, linear models become much more effective when we are working with
    linearized data.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 我们最常应用变换来**线性化变量之间的关系**。如果我们找到一个变换使得两个变量的散点图呈线性关系，我们可以“回溯”找到变量之间的确切关系。这在两个主要方面帮助我们。首先，线性关系特别容易解释
    - 我们直观地知道线性趋势的斜率和截距代表什么，以及它们如何帮助我们理解两个变量之间的关系。其次，线性关系是线性模型的基础。我们将在下周开始详细探讨线性建模。正如我们将很快看到的，当我们处理线性化的数据时，线性模型变得更加有效。
- en: In the remainder of this note, we will discuss how to linearize a dataset to
    produce the result below. Notice that the resulting plot displays a rough linear
    relationship between the values plotted on the x and y axes.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在本笔记的其余部分，我们将讨论如何对数据集进行线性化，以产生下面的结果。请注意，所得的图显示了x和y轴上绘制的值之间的粗略线性关系。
- en: '![linearize](../Images/2077b3df745a01e2133c143c08c2f15e.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![linearize](../Images/2077b3df745a01e2133c143c08c2f15e.png)'
- en: 8.2.1 Linearization and Applying Transformations
  id: totrans-170
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.2.1 线性化和应用变换
- en: 'To linearize a relationship, begin by asking yourself: what makes the data
    non-linear? It is helpful to repeat this question for each variable in your visualization.'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 要线性化一个关系，请先问自己：是什么使数据非线性？对于可视化中的每个变量，重复这个问题是有帮助的。
- en: Let’s start by considering the gross national income variable in our plot above.
    Looking at the y values in the scatter plot, we can see that many large y values
    are all clumped together, compressing the vertical axis. The scale of the horizontal
    axis is also being distorted by the few large outlying x values on the right.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们首先考虑上面图中的国民总收入变量。观察散点图中的y值，我们可以看到许多大的y值都聚集在一起，压缩了垂直轴。水平轴的比例也受到右侧少数大的离群x值的影响而被扭曲。
- en: '![horizontal](../Images/e972d5113e68e50ccc7d89fb8c351822.png)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![horizontal](../Images/e972d5113e68e50ccc7d89fb8c351822.png)'
- en: 'If we decreased the size of these outliers relative to the bulk of the data,
    we could reduce the distortion of the horizontal axis. How can we do this? We
    need a transformation that will:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们相对于大部分数据减小这些离群值的大小，我们可以减少水平轴的扭曲。我们如何做到这一点呢？我们需要一个变换，它将：
- en: Decrease the magnitude of large x values by a significant amount.
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显著减小大x值的幅度。
- en: Not drastically change the magnitude of small x values.
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不会大幅改变小x值的幅度。
- en: One function that produces this result is the **log transformation**. When we
    take the logarithm of a large number, the original number will decrease in magnitude
    dramatically. Conversely, when we take the logarithm of a small number, the original
    number does not change its value by as significant of an amount (to illustrate
    this, consider the difference between \(\log{(100)} = 4.61\) and \(\log{(10)}
    = 2.3\)).
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 产生这种结果的一个函数是**对数变换**。当我们取一个大数的对数时，原始数值的幅度会急剧减小。相反，当我们取一个小数的对数时，原始数值的值不会发生显著的变化（为了说明这一点，考虑一下\(\log{(100)}
    = 4.61\)和\(\log{(10)} = 2.3\)之间的差异）。
- en: In Data 100 (and most upper-division STEM classes), \(\log\) is used to refer
    to the natural logarithm with base \(e\).
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 在Data 100（以及大多数高年级的STEM课程）中，\(\log\)用于指代以\(e\)为底的自然对数。
- en: '[PRE25]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '![](../Images/e8f36baa0dc1568804765f215cd60d45.png)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e8f36baa0dc1568804765f215cd60d45.png)'
- en: After taking the logarithm of our x values, our plot appears much more balanced
    in its horizontal scale. We no longer have many datapoints clumped on one end
    and a few outliers out at extreme values.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在对x值取对数之后，我们的图在水平比例上显得更加平衡。我们不再有许多数据点聚集在一端，也没有少数离群值位于极端值。
- en: Let’s repeat this reasoning for the y values. Considering only the vertical
    axis of the plot, notice how there are many datapoints concentrated at large y
    values. Only a few datapoints lie at smaller values of y.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们对y值重复这种推理。只考虑图的垂直轴，注意到有许多数据点集中在大的y值上。只有少数数据点位于较小的y值。
- en: 'If we were to “spread out” these large values of y more, we would no longer
    see the dense concentration in one region of the y-axis. We need a transformation
    that will:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们能够更加“分散”这些大的y值，我们将不再看到y轴的一个区域中有密集的集中。我们需要一个变换，它将：
- en: Increase the magnitude of large values of y so these datapoints are distributed
    more broadly on the vertical scale,
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加y的大值的幅度，使这些数据点在垂直比例上更广泛地分布，
- en: Not substantially alter the scaling of small values of y (we do not want to
    drastically modify the lower end of the y axis, which is already distributed evenly
    on the vertical scale).
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不要显著改变y的小值的比例（我们不希望大幅修改y轴的下限，因为它已经在垂直比例上均匀分布）。
- en: In this case, it is helpful to apply a **power transformation** – that is, raise
    our y values to a power. Let’s try raising our adult literacy rate values to the
    power of 4\. Large values raised to the power of 4 will increase in magnitude
    proportionally much more than small values raised to the power of 4 (consider
    the difference between \(2^4 = 16\) and \(200^4 = 1600000000\)).
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，应用**幂变换**是有帮助的 - 也就是说，将我们的y值提高到一个幂。让我们尝试将成年识字率的值提高到4次方。大值提高到4次方会比小值提高到4次方增加更多的幅度（考虑\(2^4
    = 16\)和\(200^4 = 1600000000\)之间的差异）。
- en: '[PRE26]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '![](../Images/57359b82fec4332148a8eab44630857d.png)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/57359b82fec4332148a8eab44630857d.png)'
- en: Our scatter plot is looking a lot better! Now, we are plotting the log of our
    original x values on the horizontal axis, and the 4th power of our original y
    values on the vertical axis. We start to see an approximate *linear* relationship
    between our transformed variables.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的散点图看起来好多了！现在，我们在水平轴上绘制原始 x 值的对数，垂直轴上绘制原始 y 值的4次方。我们开始看到我们转换变量之间的近似*线性*关系。
- en: 'What can we take away from this? We now know that the log of gross national
    income and adult literacy to the power of 4 are roughly linearly related. If we
    denote the original, untransformed gross national income values as \(x\) and the
    original adult literacy rate values as \(y\), we can use the standard form of
    a linear fit to express this relationship:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 我们能从中得出什么？我们现在知道国民总收入的对数和成年识字率的4次方大致呈线性关系。如果我们将原始未转换的国民总收入值表示为 \(x\)，原始成年识字率值表示为
    \(y\)，我们可以使用线性拟合的标准形式来表示这种关系：
- en: \[y^4 = m(\log{x}) + b\]
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: \[y^4 = m(\log{x}) + b\]
- en: Where \(m\) represents the slope of the linear fit, while \(b\) represents the
    intercept.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 其中，\(m\) 表示线性拟合的斜率，\(b\) 表示截距。
- en: The cell below computes \(m\) and \(b\) for our transformed data. We’ll discuss
    how this code was generated in a future lecture.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的单元格计算了我们转换数据的 \(m\) 和 \(b\)。我们将在未来的讲座中讨论这段代码是如何生成的。
- en: <details><summary>Code</summary>
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: <details><summary>代码</summary>
- en: '[PRE27]</details>'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE27]</details>'
- en: '[PRE28]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '![](../Images/03d7f7e7afe8dff0c2bb11db937ea886.png)'
  id: totrans-197
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/03d7f7e7afe8dff0c2bb11db937ea886.png)'
- en: What if we want to understand the *underlying* relationship between our original
    variables, before they were transformed? We can simply rearrange our linear expression
    above!
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们想要了解在转换之前我们原始变量之间的*潜在*关系呢？我们可以简单地重新排列上面的线性表达式！
- en: Recall our linear relationship between the transformed variables \(\log{x}\)
    and \(y^4\).
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 回想一下我们转换变量 \(\log{x}\) 和 \(y^4\) 之间的线性关系。
- en: \[y^4 = m(\log{x}) + b\]
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: \[y^4 = m(\log{x}) + b\]
- en: By rearranging the equation, we find a relationship between the untransformed
    variables \(x\) and \(y\).
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 通过重新排列方程，我们找到了未转换变量 \(x\) 和 \(y\) 之间的关系。
- en: \[y = [m(\log{x}) + b]^{(1/4)}\]
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: \[y = [m(\log{x}) + b]^{(1/4)}\]
- en: When we plug in the values for \(m\) and \(b\) computed above, something interesting
    happens.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们代入上面计算的 \(m\) 和 \(b\) 的值时，有趣的事情发生了。
- en: <details><summary>Code</summary>
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: <details><summary>代码</summary>
- en: '[PRE29]</details>'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE29]</details>'
- en: '![](../Images/4292a3c811125901d196ac77bf17a9a5.png)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4292a3c811125901d196ac77bf17a9a5.png)'
- en: We have found a relationship between our original variables – gross national
    income and adult literacy rate!
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经找到了我们原始变量——国民总收入和成年识字率之间的关系！
- en: 'Transformations are powerful tools for understanding our data in greater detail.
    To summarize what we just achieved:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 转换是了解我们的数据更详细的强大工具。总结我们刚刚取得的成果：
- en: We identified appropriate transformations to **linearize** the original data.
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们确定了适当的转换方法来**线性化**原始数据。
- en: We used our knowledge of linear curves to compute the slope and intercept of
    the transformed data.
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们利用我们对线性曲线的了解来计算转换数据的斜率和截距。
- en: We used this slope and intercept information to derive a relationship in the
    untransformed data.
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们使用这个斜率和截距信息来推导未转换数据中的关系。
- en: Linearization will be an important tool as we begin our work on linear modeling
    next week.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 线性化将是我们下周开始线性建模工作的重要工具。
- en: 8.2.1.1 Tukey-Mosteller Bulge Diagram
  id: totrans-213
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.2.1.1 图基-莫斯特勒凸起图
- en: The **Tukey-Mosteller Bulge Diagram** is a good guide when determining possible
    transformations to achieve linearity. It is a visual summary of the reasoning
    we just worked through above.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '**图基-莫斯特勒凸起图**是确定可能的转换以实现线性关系时的良好指南。它是我们刚刚通过的推理的视觉总结。'
- en: '![tukey_mosteller](../Images/f3c94a6817303d3285820b8349156e5f.png)'
  id: totrans-215
  prefs: []
  type: TYPE_IMG
  zh: '![tukey_mosteller](../Images/f3c94a6817303d3285820b8349156e5f.png)'
- en: How does it work? Each curved “bulge” represents a possible shape of non-linear
    data. To use the diagram, find which of the four bulges resembles your dataset
    the most closely. Then, look at the axes of the quadrant for this bulge. The horizontal
    axis will list possible transformations that could be applied to your x data for
    linearization. Similarly, the vertical axis will list possible transformations
    that could be applied to your y data. Note that each axis lists two possible transformations.
    While *either* of these transformations has the *potential* to linearize your
    dataset, note that this is an iterative process. It’s important to try out these
    transformations and look at the results to see whether you’ve actually achieved
    linearity. If not, you’ll need to continue testing other possible transformations.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 它是如何工作的？每个弯曲的“凸起”代表非线性数据的可能形状。要使用该图，找出四个凸起中哪一个最接近你的数据集。然后，查看该凸起的象限轴。水平轴将列出可能应用于
    x 数据线性化的转换。同样，垂直轴将列出可能应用于 y 数据的转换。请注意，每个轴列出两种可能的转换。虽然*任何*这些转换都有*潜力*使您的数据集线性化，但请注意这是一个迭代过程。重要的是要尝试这些转换并查看结果，以查看您是否实际实现了线性关系。如果没有，您将需要继续测试其他可能的转换。
- en: 'Generally:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 一般来说：
- en: \(\sqrt{}\) and \(\log{}\) will reduce the magnitude of large values.
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: \(\sqrt{}\) 和 \(\log{}\) 将减少大值的幅度。
- en: Powers (\(^2\) and \(^3\)) will increase the spread in magnitude of large values.
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 幂次（\(^2\) 和 \(^3\)）将增加大值的幅度。
- en: '![bulge](../Images/5472502ee840b63e67a37336d6800e14.png)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![bulge](../Images/5472502ee840b63e67a37336d6800e14.png)'
- en: '**Important:** You should still understand the *logic* we worked through to
    determine how best to transform the data. The bulge diagram is just a summary
    of this same reasoning. You will be expected to be able to explain why a given
    transformation is or is not appropriate for linearization.'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '**重要：** 您仍应理解我们通过的逻辑，以确定如何最好地转换数据。凸起图只是对这种推理的总结。您应该能够解释为什么给定的转换是否适合线性化。'
- en: 8.2.2 Additional Remarks
  id: totrans-222
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.2.2 附加说明
- en: Visualization requires a lot of thought!
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 可视化需要大量思考！
- en: There are many tools for visualizing distributions.
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有许多用于可视化分布的工具。
- en: 'Distribution of a single variable:'
  id: totrans-225
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单个变量的分布：
- en: Rugplot
  id: totrans-226
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: Rugplot
- en: Histogram
  id: totrans-227
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 直方图
- en: Density plot
  id: totrans-228
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 密度图
- en: Box plot
  id: totrans-229
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 箱线图
- en: Violin plot
  id: totrans-230
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 小提琴图
- en: 'Joint distribution of two quantitative variables:'
  id: totrans-231
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两个定量变量的联合分布：
- en: Scatter plot
  id: totrans-232
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 散点图
- en: Hex plot
  id: totrans-233
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 六边形图
- en: Contour plot
  id: totrans-234
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 等高线图
- en: This class primarily uses `seaborn` and `matplotlib`, but `pandas` also has
    basic built-in plotting methods. Many other visualization libraries exist, and
    `plotly` is one of them.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 这门课程主要使用`seaborn`和`matplotlib`，但`pandas`也有基本的内置绘图方法。还有许多其他可视化库，其中`plotly`就是其中之一。
- en: '`plotly` creates very easily creates interactive plots.'
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`plotly`非常容易创建交互式图。'
- en: '`plotly` will occasionally appear in lecture code, labs, and assignments!'
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`plotly`偶尔会出现在讲座代码、实验和作业中！'
- en: Next, we’ll go deeper into the theory behind visualization.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将深入探讨可视化背后的理论。
- en: 8.3 Visualization Theory
  id: totrans-239
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 8.3 可视化理论
- en: This section marks a pivot to the second major topic of this lecture - visualization
    theory. We’ll discuss the abstract nature of visualizations and analyze how they
    convey information.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 本节标志着本讲座的第二个主要主题-可视化理论。我们将讨论可视化的抽象性质，并分析它们如何传达信息。
- en: 'Remember, we had two goals for visualizing data. This section is particularly
    important in:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，我们对可视化数据有两个目标。本节在以下方面尤为重要：
- en: Helping us understand the data and results,
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 帮助我们理解数据和结果，
- en: Communicating our results and conclusions with others.
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与他人交流我们的结果和结论。
- en: 8.3.1 Information Channels
  id: totrans-244
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.1 信息通道
- en: Visualizations are able to convey information through various encodings. In
    the remainder of this lecture, we’ll look at the use of color, scale, and depth,
    to name a few.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 可视化能够通过各种编码传达信息。在本讲座的其余部分，我们将看看颜色、规模和深度的使用。
- en: 8.3.1.1 Encodings in Rugplots
  id: totrans-246
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.3.1.1 Rugplots中的编码
- en: 'One detail that we may have overlooked in our earlier discussion of rugplots
    is the importance of encodings. Rugplots are effective visuals because they utilize
    line thickness to encode frequency. Consider the following diagram:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们早期讨论rugplots时，我们可能忽视了编码的重要性。Rugplots是有效的可视化，因为它们利用线条粗细来编码频率。考虑以下图表：
- en: '![rugplot_encoding](../Images/af5ff1d259c82d044806558f71debf81.png)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
  zh: '![rugplot_encoding](../Images/af5ff1d259c82d044806558f71debf81.png)'
- en: 8.3.1.2 Multi-Dimensional Encodings
  id: totrans-249
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.3.1.2 多维编码
- en: 'Encodings are also useful for representing multi-dimensional data. Notice how
    the following visual highlights four distinct “dimensions” of data:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 编码也对表示多维数据很有用。注意以下可视化突出了数据的四个不同“维度”：
- en: X-axis
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: X轴
- en: Y-axis
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Y轴
- en: Area
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 面积
- en: Color
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 颜色
- en: '![multi_dim_encoding](../Images/046cb78c9037a8ee6d434692b68a84b2.png)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![multi_dim_encoding](../Images/046cb78c9037a8ee6d434692b68a84b2.png)'
- en: The human visual perception system is only capable of visualizing data in a
    three-dimensional plane, but as you’ve seen, we can encode many more channels
    of information.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 人类视觉感知系统只能在三维平面上可视化数据，但正如你所见，我们可以编码更多的信息通道。
- en: 8.3.2 Harnessing the Axes
  id: totrans-257
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.2 利用坐标轴
- en: 8.3.2.1 Consider the Scale of the Data
  id: totrans-258
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.3.2.1 考虑数据的规模
- en: However, we should be careful to not misrepresent relationships in our data
    by manipulating the scale or axes. The visualization below improperly portrays
    two seemingly independent relationships on the same plot. The authors have clearly
    changed the scale of the y-axis to mislead their audience.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，我们应该小心，不要通过操纵比例尺或坐标轴来误传数据中的关系。下面的可视化不正确地描绘了同一图上两个看似独立的关系。作者明显改变了y轴的比例尺，以误导他们的观众。
- en: '![wrong_scale_viz](../Images/9fb323bb557749235cf8132f5984000d.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![wrong_scale_viz](../Images/9fb323bb557749235cf8132f5984000d.png)'
- en: Notice how the downwards-facing line segment contains values in the millions,
    while the upwards-trending segment only contains values near three hundred thousand.
    These lines should not be intersecting.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 注意向下的线段包含数百万的值，而向上趋势的线段只包含接近三十万的值。这些线段不应该相交。
- en: When there is a large difference in the magnitude of the data, it’s advised
    to analyze percentages instead of counts. The following diagrams correctly display
    the trends in cancer screening and abortion rates.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 当数据的数量级差异很大时，建议分析百分比而不是计数。以下图表正确显示了癌症筛查和流产率的趋势。
- en: '![good_viz_scale_1](../Images/f086b348ed1502592a6f92159d779e8d.png)'
  id: totrans-263
  prefs: []
  type: TYPE_IMG
  zh: '![good_viz_scale_1](../Images/f086b348ed1502592a6f92159d779e8d.png)'
- en: '![good_viz_scale_2](../Images/67db9fa191c750d8f1d19287ecca6fdc.png)'
  id: totrans-264
  prefs: []
  type: TYPE_IMG
  zh: '![good_viz_scale_2](../Images/67db9fa191c750d8f1d19287ecca6fdc.png)'
- en: 8.3.2.2 Reveal the Data
  id: totrans-265
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.3.2.2 揭示数据
- en: Great visualizations not only consider the scale of the data but also utilize
    the axes in a way that best conveys information. For example, data scientists
    commonly set certain axes limits to highlight parts of the visualization they
    are most interested in.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 出色的可视化不仅考虑数据的规模，还利用坐标轴以最佳方式传达信息。例如，数据科学家通常设置某些坐标轴限制以突出他们最感兴趣的可视化部分。
- en: '![unrevealed_viz](../Images/2e8a0161eff398ca11c990ca43c85dc1.png)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![unrevealed_viz](../Images/2e8a0161eff398ca11c990ca43c85dc1.png)'
- en: '![revealed_viz](../Images/94f851385e136093b5314272a1a22d08.png)'
  id: totrans-268
  prefs: []
  type: TYPE_IMG
  zh: '![revealed_viz](../Images/94f851385e136093b5314272a1a22d08.png)'
- en: The visualization on the right captures the trend in coronavirus cases during
    March of 2020\. From only looking at the visualization on the left, a viewer may
    incorrectly believe that coronavirus began to skyrocket on March 4^(th), 2020\.
    However, the second illustration tells a different story - cases rose closer to
    March 21^(th), 2020.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 右侧的可视化捕捉了2020年3月冠状病毒病例的趋势。仅仅通过观察左侧的可视化，观众可能会错误地认为冠状病毒在2020年3月4日开始急剧上升。然而，第二幅插图讲述了一个不同的故事-病例在2020年3月21日左右上升。
- en: 8.3.3 Harnessing Color
  id: totrans-270
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.3 利用颜色
- en: Color is another important feature in visualizations that does more than what
    meets the eye.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 颜色是可视化中的另一个重要特征，它的作用远不止看上去的那么简单。
- en: We already explored using color to encode a categorical variable in our scatter
    plot. Let’s now discuss the uses of color in novel visualizations like colormaps
    and heatmaps.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经探讨了在散点图中使用颜色来编码分类变量。现在让我们讨论在新颖的可视化中使用颜色的用途，比如色图和热图。
- en: 5-8% of the world is red-green color blind, so we have to be very particular
    about our color scheme. We want to make these as accessible as possible. Choosing
    a set of colors that work together is evidently a challenging task!
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 世界上5-8%的人是红绿色盲，所以我们必须非常注意我们的配色方案。我们希望尽可能地使这些配色方案易于访问。选择一组能够很好地配合的颜色显然是一项具有挑战性的任务！
- en: 8.3.3.1 Colormaps
  id: totrans-274
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 8.3.3.1 色图
- en: Colormaps are mappings from pixel data to color values, and they’re often used
    to highlight distinct parts of an image. Let’s investigate a few properties of
    colormaps.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 色图是从像素数据到颜色值的映射，它们经常用于突出图像的不同部分。让我们来研究一下色图的一些特性。
- en: '**Jet Colormap** ![jet_colormap](../Images/8b4eae3f8120a82f881a489a5a5b1474.png)'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: '**Jet Colormap** ![jet_colormap](../Images/8b4eae3f8120a82f881a489a5a5b1474.png)'
- en: '**Viridis Colormap** ![viridis_colormap](../Images/5fbc10eb3a5dc9efd335246a6d9551f7.png)'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: '**Viridis Colormap** ![viridis_colormap](../Images/5fbc10eb3a5dc9efd335246a6d9551f7.png)'
- en: The jet colormap is infamous for being misleading. While it seems more vibrant
    than viridis, the aggressive colors poorly encode numerical data. To understand
    why, let’s analyze the following images.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: jet色图因为不是感知均匀而臭名昭著。虽然它看起来比viridis更生动，但是激烈的颜色很差地编码了数值数据。为了理解原因，让我们分析以下图像。
- en: '![four_by_four_colormap](../Images/9a5541867bd38f1745c3d4e3ee5fd6e8.png)'
  id: totrans-279
  prefs: []
  type: TYPE_IMG
  zh: '![four_by_four_colormap](../Images/9a5541867bd38f1745c3d4e3ee5fd6e8.png)'
- en: '![jet_3_colormap](../Images/80cb79f2750107d3cafe82dd6991fa05.png)'
  id: totrans-280
  prefs: []
  type: TYPE_IMG
  zh: '![jet_3_colormap](../Images/80cb79f2750107d3cafe82dd6991fa05.png)'
- en: The diagram on the left compares how a variety of colormaps represent pixel
    data that transitions from a high to low intensity. These include the jet colormap
    (row a) and grayscale (row b). Notice how the grayscale images do the best job
    in smoothly transitioning between pixel data. The jet colormap is the worst at
    this - the four images in row (a) look like a conglomeration of individual colors.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 左侧的图表比较了各种色图如何表示从高到低强度的像素数据。这些包括jet色图（a行）和灰度（b行）。注意灰度图像在平滑过渡像素数据方面做得最好。jet色图在这方面是最差的
    - a行的四幅图像看起来像是一团独立的颜色。
- en: The difference is also evident in the images labeled (a) and (b) on the left
    side. The grayscale image is better at preserving finer detail in the vertical
    line strokes. Additionally, grayscale is preferred in X-ray scans for being more
    neutral. The intensity of the dark red color in the jet colormap is frightening
    and indicates something is wrong.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 这种差异在左侧标有(a)和(b)的图像中也是明显的。灰度图像更擅长保留垂直线条中的细节。此外，X射线扫描中更偏好灰度图像，因为它更加中性。jet色图中深红色的强度令人恐惧，并且表明出现了问题。
- en: Why is the jet colormap so much worse? The answer lies in how its color composition
    is perceived to the human eye.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 为什么jet色图要糟糕得多？答案在于它的颜色组合对人眼的感知。
- en: '**Jet Colormap Perception** ![jet_perceptually_uniform](../Images/4628e77cf78082a6b0ec127f91388606.png)'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: '**Jet Colormap Perception** ![jet_perceptually_uniform](../Images/4628e77cf78082a6b0ec127f91388606.png)'
- en: '**Viridis Colormap Perception** ![viridis_perceptually_uniform](../Images/f207bbef4fd26c5608af9d86c6fec3df.png)'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: '**Viridis Colormap Perception** ![viridis_perceptually_uniform](../Images/f207bbef4fd26c5608af9d86c6fec3df.png)'
- en: The jet colormap is largely misleading because it is not perceptually uniform.
    **Perceptually uniform colormaps** have the property that if the pixel data goes
    from 0.1 to 0.2, the perceptual change is the same as when the data goes from
    0.8 to 0.9.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: jet色图在很大程度上是误导性的，因为它不是感知均匀的。**感知均匀色图**具有这样的特性，即如果像素数据从0.1到0.2，感知变化与数据从0.8到0.9时的感知变化相同。
- en: Notice how the said uniformity is present within the linear trend displayed
    in the viridis colormap. On the other hand, the jet colormap is largely non-linear
    - this is precisely why it’s considered a worse colormap.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 注意在viridis色图中显示的线性趋势中存在的均匀性。另一方面，jet色图大部分是非线性的 - 这正是为什么它被认为是一个更糟糕的色图的原因。
- en: 8.3.4 Harnessing Markings
  id: totrans-288
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.4 利用标记
- en: 'In our earlier discussion of multi-dimensional encodings, we analyzed a scatter
    plot with four pseudo-dimensions: the two axes, area, and color. Were these appropriate
    to use? The following diagram analyzes how well the human eye can distinguish
    between these “markings”.'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们之前对多维编码的讨论中，我们分析了一个带有四个伪维度的散点图：两个轴，面积和颜色。这些是否适合使用？以下图表分析了人眼在这些“标记”之间的区分能力。
- en: '![markings_viz](../Images/1b02d7f1622803751ffb942537b60fed.png)'
  id: totrans-290
  prefs: []
  type: TYPE_IMG
  zh: '![markings_viz](../Images/1b02d7f1622803751ffb942537b60fed.png)'
- en: There are a few key takeaways from this diagram
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 从这张图表中有一些关键的收获
- en: Lengths are easy to discern. Don’t use plots with jiggled baselines - keep everything
    axis-aligned.
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 长度很容易辨别。不要使用有杂乱基线的图表 - 保持一切与坐标轴对齐。
- en: Avoid pie charts! Angle judgments are inaccurate.
  id: totrans-293
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 避免使用饼图！角度判断不准确。
- en: Areas and volumes are hard to distinguish (area charts, word clouds, etc.).
  id: totrans-294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 面积和体积很难区分（面积图，词云等）。
- en: 8.3.5 Harnessing Conditioning
  id: totrans-295
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.5 利用条件
- en: Conditioning is the process of comparing data that belong to separate groups.
    We’ve seen this before in overlayed distributions, side-by-side box plots, and
    scatter plots with categorical encodings. Here, we’ll introduce terminology that
    formalizes these examples.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 条件是比较属于不同组的数据的过程。我们之前在叠加分布，并排箱线图和带有分类编码的散点图中见过这种情况。在这里，我们将介绍正式化这些例子的术语。
- en: Consider an example where we want to analyze income earnings for males and females
    with varying levels of education. There are multiple ways to compare this data.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一个例子，我们想要分析男性和女性在不同教育水平下的收入。有多种方法可以比较这些数据。
- en: '![jet_perceptually_uniform](../Images/7b8697bee0191e7d89472c426742784c.png)'
  id: totrans-298
  prefs: []
  type: TYPE_IMG
  zh: '![jet_perceptually_uniform](../Images/7b8697bee0191e7d89472c426742784c.png)'
- en: '![viridis_perceptually_uniform](../Images/a6da8f23599b95398a1fb5299cba9c98.png)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![viridis_perceptually_uniform](../Images/a6da8f23599b95398a1fb5299cba9c98.png)'
- en: 'The barplot is an example of **juxtaposition**: placing multiple plots side
    by side, with the same scale. The scatter plot is an example of **superposition**:
    placing multiple density curves and scatter plots on top of each other.'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 条形图是**并列**的一个例子：将多个图表并排放置，使用相同的比例尺。散点图是**叠加**的一个例子：将多个密度曲线和散点图叠加在一起。
- en: Which is better depends on the problem at hand. Here, superposition makes the
    precise wage difference very clear from a quick glance. However, many sophisticated
    plots convey information that favors the use of juxtaposition. Below is one example.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 哪种更好取决于手头的问题。在这里，叠加使得从一个快速浏览中清楚地看出了精确的工资差异。然而，许多复杂的图表传达的信息更有利于使用并列。下面是一个例子。
- en: '![small_multiples](../Images/26198945ce77b41c397eb8f484413392.png)'
  id: totrans-302
  prefs: []
  type: TYPE_IMG
  zh: '![小多图](../Images/26198945ce77b41c397eb8f484413392.png)'
- en: 8.3.6 Harnessing Context
  id: totrans-303
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 8.3.6 利用上下文
- en: The last component of a great visualization is perhaps the most critical - the
    use of context. Adding informative titles, axis labels, and descriptive captions
    are all best practices that we’ve heard repeatedly in Data 8.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 一个出色可视化的最后组成部分可能是最关键的 - 使用上下文。添加信息丰富的标题，坐标轴标签和描述性标题都是我们在Data 8中一再听到的最佳实践。
- en: 'A publication-ready plot (and every Data 100 plot) needs:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 一张可发布的图（以及每个Data 100图）需要：
- en: Informative title (takeaway, not description),
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信息丰富的标题（要点，而不是描述），
- en: Axis labels,
  id: totrans-307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 坐标轴标签，
- en: Reference lines, markers, etc,
  id: totrans-308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 参考线，标记等，
- en: Legends, if appropriate,
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图例，如果适用，
- en: Captions that describe data,
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 描述数据的标题，
- en: 'Captions should:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 标题应该：
- en: Be comprehensive and self-contained,
  id: totrans-312
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要全面和自包含，
- en: Describe what has been graphed,
  id: totrans-313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 描述了图表中的内容，
- en: Draw attention to important features,
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 吸引人们注意重要的特征，
- en: Describe conclusions drawn from graphs.**
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 描述了从图表中得出的结论。
